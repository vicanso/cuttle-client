<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Client - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Client.html">Client</a><ul class='methods'><li data-type='method'><a href="Client.html#addAlgorithm">addAlgorithm</a></li><li data-type='method'><a href="Client.html#addPlugin">addPlugin</a></li><li data-type='method'><a href="Client.html#createDatabase">createDatabase</a></li><li data-type='method'><a href="Client.html#createRetentionPolicy">createRetentionPolicy</a></li><li data-type='method'><a href="Client.html#dropDatabase">dropDatabase</a></li><li data-type='method'><a href="Client.html#dropRetentionPolicy">dropRetentionPolicy</a></li><li data-type='method'><a href="Client.html#findOneAndUpdate">findOneAndUpdate</a></li><li data-type='method'><a href="Client.html#on">on</a></li><li data-type='method'><a href="Client.html#query">query</a></li><li data-type='method'><a href="Client.html#queryPost">queryPost</a></li><li data-type='method'><a href="Client.html#queryRaw">queryRaw</a></li><li data-type='method'><a href="Client.html#showDatabases">showDatabases</a></li><li data-type='method'><a href="Client.html#showFieldKeys">showFieldKeys</a></li><li data-type='method'><a href="Client.html#showMeasurements">showMeasurements</a></li><li data-type='method'><a href="Client.html#showRetentionPolicies">showRetentionPolicies</a></li><li data-type='method'><a href="Client.html#showTagKeys">showTagKeys</a></li><li data-type='method'><a href="Client.html#startHealthCheck">startHealthCheck</a></li><li data-type='method'><a href="Client.html#stopHealthCheck">stopHealthCheck</a></li><li data-type='method'><a href="Client.html#syncQuery">syncQuery</a></li><li data-type='method'><a href="Client.html#syncWrite">syncWrite</a></li><li data-type='method'><a href="Client.html#updateRetentionPolicy">updateRetentionPolicy</a></li><li data-type='method'><a href="Client.html#write">write</a></li><li data-type='method'><a href="Client.html#writePoint">writePoint</a></li></ul></li><li><a href="QL.html">QL</a><ul class='methods'><li data-type='method'><a href="QL.html#addField">addField</a></li><li data-type='method'><a href="QL.html#addFunction">addFunction</a></li><li data-type='method'><a href="QL.html#addGroup">addGroup</a></li><li data-type='method'><a href="QL.html#addMeasurement">addMeasurement</a></li><li data-type='method'><a href="QL.html#clean">clean</a></li><li data-type='method'><a href="QL.html#emptyConditions">emptyConditions</a></li><li data-type='method'><a href="QL.html#emptyFields">emptyFields</a></li><li data-type='method'><a href="QL.html#emptyFunctions">emptyFunctions</a></li><li data-type='method'><a href="QL.html#emptyGroups">emptyGroups</a></li><li data-type='method'><a href="QL.html#emptyMeasurements">emptyMeasurements</a></li><li data-type='method'><a href="QL.html#multiQuery">multiQuery</a></li><li data-type='method'><a href="QL.html#removeField">removeField</a></li><li data-type='method'><a href="QL.html#removeFunction">removeFunction</a></li><li data-type='method'><a href="QL.html#removeGroup">removeGroup</a></li><li data-type='method'><a href="QL.html#removeMeasurement">removeMeasurement</a></li><li data-type='method'><a href="QL.html#subQuery">subQuery</a></li><li data-type='method'><a href="QL.html#toSelect">toSelect</a></li><li data-type='method'><a href="QL.html#where">where</a></li></ul></li><li><a href="Reader.html">Reader</a><ul class='methods'><li data-type='method'><a href="Reader.html#addCalculate">addCalculate</a></li><li data-type='method'><a href="Reader.html#addField">addField</a></li><li data-type='method'><a href="Reader.html#addFunction">addFunction</a></li><li data-type='method'><a href="Reader.html#addGroup">addGroup</a></li><li data-type='method'><a href="Reader.html#addMeasurement">addMeasurement</a></li><li data-type='method'><a href="Reader.html#clean">clean</a></li><li data-type='method'><a href="Reader.html#emptyConditions">emptyConditions</a></li><li data-type='method'><a href="Reader.html#emptyFields">emptyFields</a></li><li data-type='method'><a href="Reader.html#emptyFunctions">emptyFunctions</a></li><li data-type='method'><a href="Reader.html#emptyGroups">emptyGroups</a></li><li data-type='method'><a href="Reader.html#emptyMeasurements">emptyMeasurements</a></li><li data-type='method'><a href="Reader.html#get">get</a></li><li data-type='method'><a href="Reader.html#multiQuery">multiQuery</a></li><li data-type='method'><a href="Reader.html#queue">queue</a></li><li data-type='method'><a href="Reader.html#removeField">removeField</a></li><li data-type='method'><a href="Reader.html#removeFunction">removeFunction</a></li><li data-type='method'><a href="Reader.html#removeGroup">removeGroup</a></li><li data-type='method'><a href="Reader.html#removeMeasurement">removeMeasurement</a></li><li data-type='method'><a href="Reader.html#set">set</a></li><li data-type='method'><a href="Reader.html#subQuery">subQuery</a></li><li data-type='method'><a href="Reader.html#then">then</a></li><li data-type='method'><a href="Reader.html#toSelect">toSelect</a></li><li data-type='method'><a href="Reader.html#toString">toString</a></li><li data-type='method'><a href="Reader.html#where">where</a></li></ul></li><li><a href="Writer.html">Writer</a><ul class='methods'><li data-type='method'><a href="Writer.html#field">field</a></li><li data-type='method'><a href="Writer.html#queue">queue</a></li><li data-type='method'><a href="Writer.html#set">set</a></li><li data-type='method'><a href="Writer.html#tag">tag</a></li><li data-type='method'><a href="Writer.html#then">then</a></li><li data-type='method'><a href="Writer.html#time">time</a></li><li data-type='method'><a href="Writer.html#toJSON">toJSON</a></li></ul></li></ul><h3>Namespaces</h3><ul><li></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Client</h1>
    

    




<section>

<header>
    
        <h2>
        Client
        </h2>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line17">line 17</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>




            

            
        
        </div>
    

    

    

    
    
    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="availableServers"><span class="type-signature"></span>availableServers<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line177">line 177</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Get the available list</p>
</div>







    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const serverList = client.availableServers;
console.info(serverList)
// => [ { protocol: 'http', host: '127.0.0.1', port: 8086 } ]</code></pre>



        
            
<h4 class="name" id="database"><span class="type-signature"></span>database<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line164">line 164</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.4.4</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Get the database</p>
</div>







    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const database = client.database;
console.info(database);
// => mydb</code></pre>



        
            
<h4 class="name" id="epoch"><span class="type-signature"></span>epoch<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line275">line 275</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Get the specified precision of epoch timestamps</p>
</div>







    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const epoch = client.epoch;
console.info(epoch);
// => undefined</code></pre>



        
            
<h4 class="name" id="epoch"><span class="type-signature"></span>epoch<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line287">line 287</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Set the specified precision of epoch timestamps.It should be [h,m,s,ms,u,ns]</p>
</div>







    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.epoch = 'ms';
console.info(client.epoch);
// => 'ms'</code></pre>



        
            
<h4 class="name" id="format"><span class="type-signature"></span>format<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line262">line 262</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Set the query data format type</p>
</div>







    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.format = 'json';
console.info(client.format);
// => 'json'</code></pre>



        
            
<h4 class="name" id="format"><span class="type-signature"></span>format<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line249">line 249</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Get the query data format type</p>
</div>







    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const formatType = client.format;
console.info(formatType);
// => undefined</code></pre>



        
            
<h4 class="name" id="queryQueueLength"><span class="type-signature"></span>queryQueueLength<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line335">line 335</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Get the query queue length</p>
</div>







    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.query('http')
 .set({limit: 1})
 .queue();
client.query('login')
 .set({limit: 1})
 .queue();
console.info(client.queryQueueLength);
// => 2</code></pre>



        
            
<h4 class="name" id="timeout"><span class="type-signature"></span>timeout<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line236">line 236</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Set the http request timeout value.</p>
</div>







    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.timeout = 1000;
console.info(client.timeout);
// => 1000</code></pre>



        
            
<h4 class="name" id="timeout"><span class="type-signature"></span>timeout<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line224">line 224</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Set the http request timeout value, the unit is ms. The default is 0, no timeout.</p>
</div>







    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const ms = client.timeout;
console.info(ms);
// => 0</code></pre>



        
            
<h4 class="name" id="unavailableServers"><span class="type-signature"></span>unavailableServers<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line191">line 191</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    
        <dt class="important tag-deprecated">Deprecated:</dt><dd><ul class="dummy"><li>since version 2.5.0</li></ul></dd>
    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Get the unavailable list</p>
</div>







    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const serverList = client.unavailableServers;
console.info(serverList)
// => [ { protocol: 'http', host: '127.0.0.1', port: 8086 } ]</code></pre>



        
            
<h4 class="name" id="writeQueueLength"><span class="type-signature"></span>writeQueueLength<span class="type-signature"></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line317">line 317</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Get the write queue length</p>
</div>







    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.write('http')
 .tag({
   spdy: 'fast',
   type: '2',
 })
 .field({
   use: 300,
 })
 .queue();
client.write('http')
 .tag({
   spdy: 'slow',
   type: '4',
 })
 .field({
   use: 1000,
 })
 .queue();
console.info(client.writeQueueLength);
// => 2</code></pre>



        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="addAlgorithm"><span class="type-signature"></span>addAlgorithm<span class="signature">(type, fn)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line973">line 973</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.7.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Set the load balance algorithm</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.addAlgorithm('getByUrl', (request) => {
  return request.url.length;
});</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>the load balance type</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>fn</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>the load balance function, it shoud return an integer</p></td>
        </tr>

    
    </tbody>
</table>



















        
            

    

    <h4 class="name" id="addPlugin"><span class="type-signature"></span>addPlugin<span class="signature">(fn)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line985">line 985</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.11.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Add plugin function</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const noCache = require('superagent-no-cache')
client.addPlugin(noCache);</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fn</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>plugin function</p></td>
        </tr>

    
    </tbody>
</table>



















        
            

    

    <h4 class="name" id="createDatabase"><span class="type-signature"></span>createDatabase<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line349">line 349</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Create the database of the connection uri</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const client = new Influx('http://127.0.0.1:8086/mydb');
client.createDatabase()
 .then(() => console.info('create database success'))
 .catch(err => console.error(`create database fail, ${err.message}`));</code></pre>


















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="createRetentionPolicy"><span class="type-signature"></span>createRetentionPolicy<span class="signature">(name, duration, replication, shardDuration, isDefault)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line399">line 399</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Create retention policy</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.createRetentionPolicy('mytest', '2h')
  .then(() => console.info('create retention policy success'))
  .then(err => console.error(`create retention policy fail, ${err.message}`));</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The retention policy</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>duration</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The duration</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>replication</code></td>
            

            <td class="type">
            
                
<span class="param-type">Integer</span>


            
            </td>

            

            

            <td class="description last"><p>The replication</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>shardDuration</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The shardDuration</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>isDefault</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last"><p>Is the default retention policy</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="dropDatabase"><span class="type-signature"></span>dropDatabase<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line364">line 364</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Drop the database of the connection uri</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const client = new Influx('http://127.0.0.1:8086/mydb');
client.dropDatabase()
 .then(() => console.info('drop database success'))
 .catch(err => console.error(`drop database fail, ${err.message}`));</code></pre>


















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="dropRetentionPolicy"><span class="type-signature"></span>dropRetentionPolicy<span class="signature">(name)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line437">line 437</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Drop retention policy</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.dropRetentionPolicy('mytest')
  .then(() => console.info('drop retention policy success'))
  .then(err => console.error(`drop retention policy fail, ${err.message}`));</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The retention policy</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="findOneAndUpdate"><span class="type-signature"></span>findOneAndUpdate<span class="signature">(measurement, conditions, updateFields)</span><span class="type-signature"> &rarr; {<a href="Writer.html">Writer</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line663">line 663</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Update one record (latest)</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>measurement</code></td>
            

            <td class="type">
            
                
<span class="param-type">any</span>


            
            </td>

            

            

            <td class="description last"><p>The influxdb's measurement</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>conditions</code></td>
            

            <td class="type">
            
                
<span class="param-type">any</span>


            
            </td>

            

            

            <td class="description last"><p>The query conditions</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>updateFields</code></td>
            

            <td class="type">
            
                
<span class="param-type">any</span>


            
            </td>

            

            

            <td class="description last"><p>The update fileds</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Writer.html">Writer</a></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="on"><span class="type-signature"></span>on<span class="signature">(eventName, listener)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line19">line 19</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.4.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Listen on the event, not is support: 'queue', 'writeQueue', 'queryQueue'</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.on('queue', (type, data) => {
  // write or query
  console.info(type);
  console.info(data);
});
client.on('writeQueue', (data) => {
  console.info(data);
});
client.on('invalid-fields', (data) => {
  //{ measurement: 'request',
  // fail: [ { category: 'stripUnknown', key: 'version', value: 1 },
  //  { category: 'stripUnknown', key: 'token', value: 'abcd' },
  //  { category: 'invalid', type: 'integer', key: 'no', value: 'abcd' },
  //  { category: 'invalid', type: 'float', key: 'score', value: 'ab' } ]}
  console.info(data);
});
client.on('invalid-tags', (data) => {
  // {measurement: 'request',
  // fail: [ { category: 'invalid', key: 'type', value: 'a' } ]}
  console.info(data);
})
console.on('queryQueue', (data) => {
  console.info(data);
});</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>eventName</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The name of event</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>listener</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>The callback function</p></td>
        </tr>

    
    </tbody>
</table>



















        
            

    

    <h4 class="name" id="query"><span class="type-signature"></span>query<span class="signature">(measurement)</span><span class="type-signature"> &rarr; {<a href="Reader.html">Reader</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line631">line 631</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Get the influxdb query reader</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const reader = client.query('http');</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>measurement</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The influxdb's measurement</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Reader.html">Reader</a></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="queryPost"><span class="type-signature"></span>queryPost<span class="signature">(q, db)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line762">line 762</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Use post for the influxdb query, such as create user</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.queryPost('create user "vicanso" with password \'mypwd\' with all privileges')
  .then(() => console.info('create user success'))
  .catch(err => console.error(`create user fail, ${err.message}`));</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>q</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The influx ql</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>db</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The database</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="queryRaw"><span class="type-signature"></span>queryRaw<span class="signature">(q, db)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line747">line 747</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Use influx ql to query the data</p>
</div>









    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>const client = new Influx('http://127.0.0.1:8086/mydb')
client.queryRaw('select * from "http"')
  .then(console.info)
  .catch(console.error);</code></pre>

    <pre class="prettyprint"><code>const client = new Influx('http://127.0.0.1:8086/mydb')
client.queryRaw('select * from "login"', 'testdb')
  .then(console.info)
  .catch(console.error);</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>q</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The influx ql</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>db</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>[optional] The database, if the param is not set, it will use the connection's db.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="showDatabases"><span class="type-signature"></span>showDatabases<span class="signature">()</span><span class="type-signature"> &rarr; {Array}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line379">line 379</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>List all database of the server</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.showDatabases()
  .then(console.info)
  .catch(console.error);
// => [ 'telegraf', '_internal', 'mydb' ]</code></pre>


















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="showFieldKeys"><span class="type-signature"></span>showFieldKeys<span class="signature">(measurement)</span><span class="type-signature"> &rarr; {Array}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line563">line 563</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Show field keys of measurement</p>
</div>









    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>client.showFieldKeys()
  .then(console.info)
  .catch(console.error);
// => [
//       { name: 'cpu', values: [
//         { key: 'usage_guest', type: 'float' },
//         { key: 'usage_guest_nice', type: 'float' }]
//       },
//       { name: 'disk', values: [
//         { key: 'free', type: 'integer' },
//         { key: 'inodes_free', type: 'integer' }]
//       }
//    ]</code></pre>

    <pre class="prettyprint"><code>client.showFieldKeys('cpu')
  .then(console.info)
  .catch(console.error);
// => [
//       { name: 'cpu', values: [
//         { key: 'usage_guest', type: 'float' },
//         { key: 'usage_guest_nice', type: 'float' }]
//       }
//    ]</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>measurement</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>[optional] If not set the param, will get the field keys of the database.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="showMeasurements"><span class="type-signature"></span>showMeasurements<span class="signature">()</span><span class="type-signature"> &rarr; {Array}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line489">line 489</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>List the measurement of the influxdb server</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.showMeasurements()
  .then(console.info)
  .catch(console.error);
// => [ 'cpu', 'disk', 'diskio', 'kernel', 'mem', 'processes', 'swap', 'system' ]</code></pre>


















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="showRetentionPolicies"><span class="type-signature"></span>showRetentionPolicies<span class="signature">()</span><span class="type-signature"> &rarr; {Array}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line454">line 454</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>List retention policies</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.showRetentionPolicies()
  .then(console.info)
  .catch(console.error);
// => [ { name: 'autogen', duration: '0s', shardGroupDuration: '168h0m0s', replicaN: 1, default: true } ]</code></pre>


















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="showTagKeys"><span class="type-signature"></span>showTagKeys<span class="signature">(measurement)</span><span class="type-signature"> &rarr; {Array}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line527">line 527</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Show tag keys of measurement</p>
</div>









    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>client.showTagKeys()
  .then(console.info)
  .catch(console.error);
// => [
//       { name: 'cpu', values: [
//         { key: 'cpu' },
//         { key: 'host' },
//         { key: 'dc' }]
//       },
//       { name: 'disk', values: [
//         { key: 'dc' },
//         { key: 'fstype' }]
//       }
//    ]</code></pre>

    <pre class="prettyprint"><code>client.showTagKeys('cpu')
  .then(console.info)
  .catch(console.error);
// => [
//       { name: 'cpu', values: [
//         { key: 'cpu' },
//         { key: 'host' },
//         { key: 'dc' }]
//       }
//    ]</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>measurement</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>[optional] If not set the param, will get the tag keys of the database.</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="startHealthCheck"><span class="type-signature"></span>startHealthCheck<span class="signature">(ping, interval)</span><span class="type-signature"> &rarr; {<a href="Client.html">Client</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line132">line 132</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.4.5</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Start the influxdb server health check</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.startHealthCheck();</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ping</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>
|

<span class="param-type">Promise</span>


            
            </td>

            

            

            <td class="description last"><p>[optional] The ping checker, It not set the param, will use the default ping checker.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>interval</code></td>
            

            <td class="type">
            
                
<span class="param-type">Integer</span>


            
            </td>

            

            

            <td class="description last"><p>[optional] The check interval</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Client.html">Client</a></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="stopHealthCheck"><span class="type-signature"></span>stopHealthCheck<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="Client.html">Client</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line150">line 150</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Stop the influxdb server health check</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.stopHealthCheck();</code></pre>


















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Client.html">Client</a></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="syncQuery"><span class="type-signature"></span>syncQuery<span class="signature">(format)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line843">line 843</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Sync the query queue</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.query('cpu')
  .set({
    limit: 1,
  })
  .queue();
client.query('mem')
  .set({
    limit: 1,
  })
  .queue();
client.syncQuery('json')
  .then(console.info)
  .catch(console.error);
// => { cpu:
//      [ { time: '2016-12-09T12:46:48Z',
//          cpu: 'cpu-total',
//          host: 'red',
//          usage_user: 0.05000000000000008 } ],
//       mem:
//       [ { time: '2016-12-09T12:46:48Z',
//           active: 175300608,
//           available: 7891501056,
//           available_percent: 94.7944240310642,
//           used_percent: 5.205575968935799 } ] }</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>format</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>[optional] The query response format type</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="syncWrite"><span class="type-signature"></span>syncWrite<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line796">line 796</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Sync the write queue</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.write('http')
  .tag({
    spdy: '1',
    type: '2',
  })
  .field({
     use: 300,
     code: 200,
   })
   .queue();
client.write('http')
  .tag({
    spdy: '2',
    type: '3',
  })
  .field({
    use: 600,
    code: 304,
  })
  .queue();
client.syncWrite()
  .then(() => console.info('sync write queue success'))
  .catch(err => console.error(`sync write queue fail, ${err.message}`));
// => sync write queue success</code></pre>


















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="updateRetentionPolicy"><span class="type-signature"></span>updateRetentionPolicy<span class="signature">(name, duration, replication, shardDuration, isDefault)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line420">line 420</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Update retention policy</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.updateRetentionPolicy('mytest', '2h')
  .then(() => console.info('update retention policy success'))
  .then(err => console.error(`update retention policy fail, ${err.message}`));</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The retention policy</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>duration</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The duration</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>replication</code></td>
            

            <td class="type">
            
                
<span class="param-type">Integer</span>


            
            </td>

            

            

            <td class="description last"><p>The replication</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>shardDuration</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The shardDuration</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>isDefault</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last"><p>Is the default retention policy</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="write"><span class="type-signature"></span>write<span class="signature">(measurement, precision)</span><span class="type-signature"> &rarr; {<a href="Writer.html">Writer</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line605">line 605</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Get the writer for the influxdb</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.write('http')
  .tag({
    spdy: '1',
    type: '2',
  })
  .field({
     use: 300,
     code: 200,
   })
   .then(() => console.info('write point success'));
   .catch(err => console.error(`write point fail, ${err.message}`));</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>measurement</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The measurment name</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>precision</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>[optional] timestamp precision, 'h', 'm', 's', 'ms', 'u', 'n'</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Writer.html">Writer</a></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="writePoint"><span class="type-signature"></span>writePoint<span class="signature">(measurement, fields, tags, precision)</span><span class="type-signature"> &rarr; {<a href="Writer.html">Writer</a>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="lib_client.js.html">lib/client.js</a>, <a href="lib_client.js.html#line720">line 720</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>2.2.0</li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Write point to influxdb</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>client.writePoint('http', {
  use: 300,
  code: 200,
}, {
  spdy: '1',
  type: '2',
}).then(() => console.info('write point success'))
.catch(err => console.error(`write point fail,  ${err.message}`));</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>measurement</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The measurement name</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>fields</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The fields of write point</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tags</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>[optional] The tags of write point</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>precision</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>[optional] The timestamp precision. 'h', 'm', 's', 'ms', 'u', 'n'</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Writer.html">Writer</a></span>


    </dd>
</dl>

    



        
    

    

    
</article>

</section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Mar 19 2019 17:31:33 GMT+1300 (New Zealand Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>


</body>
</html>